<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>自由配置型食品認知マップ研究</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="stepper">
        <ul>
            <li class="step">
                <div class="step-number">1</div>
                <div class="step-title">情報入力</div>
            </li>
            <li class="step">
                <div class="step-number">2</div>
                <div class="step-title">食品配置</div>
            </li>
            <li class="step">
                <div class="step-number">3</div>
                <div class="step-title">グループ作成</div>
            </li>
            <li class="step">
                <div class="step-number">4</div>
                <div class="step-title">フィードバック</div>
            </li>
            <li class="step">
                <div class="step-number">5</div>
                <div class="step-title">アンケート</div>
            </li>
            <li class="step">
                <div class="step-number">6</div>
                <div class="step-title">完了</div>
            </li>
        </ul>
    </div>
    
    <div id="app" class="screen-container">
        <div id="screen1" class="screen">
            <h2>被験者情報を入力してください</h2>
            <input id="subjectName" type="text" placeholder="お名前" required autocomplete="name">
            <input id="subjectAge" type="number" placeholder="年齢" min="18" max="99" required autocomplete="age">
            <input id="subjectEmail" type="email" placeholder="メールアドレス" required autocomplete="email">
            <button id="goToScreen2Btn">次へ</button>
            <p class="info-text">※入力された情報は、研究目的以外には使用されません。</p>
        </div>

        <div id="screen2" class="screen">
            <h2 id="instruction-title"></h2>
            <div id="instruction-body"></div>
            <button id="instruction-continue-btn"></button>
            <button id="backToScreen1Btn" class="back-button">最初の画面に戻る</button> 
        </div>

        <div id="screen3" class="screen">
            <h1>自由配置型食品認知マップ</h1>
            <div class="experiment-layout-container">
                <div class="canvas-area">
                    <div id="canvas-container">
                        <canvas id="clusterCanvas"></canvas>
                    </div>
                </div>
                <div id="details-panel" class="details-area">
                    </div>
            </div>
            <div class="button-controls">
                <button id="backToScreen2Btn" class="back-button">前の画面に戻る</button> 
                <button id="finishPlacementBtn">配置を確定する</button>
                <button id="goToFeedbackBtn" style="display:none;">クラスターレビューへ進む</button>
                <button id="saveFeedbackAndDataBtn" style="display:none;">全てのフィードバックを記入し次へ進む</button>
            </div>
            <div class="spinner" id="loadingSpinner"></div>
            <p class="info-text" id="statusMessage"></p>
        </div>

        <div id="screen4" class="screen">
            </div>

        <div id="screen5" class="screen">
            <h2>実験にご協力いただきありがとうございました！</h2>
            <p>全データの送信が完了しました。ご協力に心より感謝申し上げます。</p>
            <p class="info-text">この画面を閉じていただいて結構です。</p>
            <button id="backToStartBtn2" class="back-button">最初の画面に戻る</button>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>